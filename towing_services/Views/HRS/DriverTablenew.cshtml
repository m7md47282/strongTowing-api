@model towing_services.Models.PaginatedDriversViewModel

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">


<style>
    body {
        background: #f5f7f7;
        margin-top: 0; 
    }

  
    


 
     
    .table th, .table td, span, h2 {
        font-size: 22px;
    }

  

        .table th, .table td {
            border: 1px solid #ddd; /* تعيين الحدود بين الخلايا */
        }



    .btns {
        display: flex; /* وضع الأزرار في سطر واحد */
        gap: 20px; /* المسافة بين الأزرار */
        font-size: 20px;
    }

    .btna {
        background: #1286ba;
        color: white;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
    }

        .btna:hover {
            background: #121517; /* تأثير عند التمرير على الزر */
            color: white;
        }


    .btn {
        font-size: 20px;
        background: #42b3f5;
        color: white
    }

 

        .btn:hover {
            background: #808080;
        }

    .f {
        font-size: 20px;
    }

    .bg {
        background: #3243ff;
    }

    .bg-n {
        background: #5b578f;
        padding: 7px 17px
    }

    .modal-dialog {
        max-width: 50%;
        margin: 30px auto;
        max-height: 80vh;
        overflow-y: auto;
    }

    .modal-body {
        text-align: center;
        max-height: 100%;
        overflow: hidden;
    }

        .modal-body img {
            width: 100%;
            height: auto;
            max-height: 70vh;
        }

    .table th {
        white-space: nowrap;
    }

    .img-thumbnail {
        width: 50px;
        height: 50px;
        object-fit: cover; /* التأكد من أن الصور لا تخرج عن الإطار */
    }

    /* تخصيص الجدول للأحجام الصغيرة */
    @@media (max-width: 768px) {
         .modal-content {
            padding: 10px;
            font-size: 14px;
        }

        .modal-dialog {
            max-width: 80%; /* 80% من عرض الشاشة */
        }

        .modal-header h5.modal-title {
            font-size: 16px;
        }

        .modal-body {
            font-size: 14px;
        }

        .modal-footer .btna {
            padding: 6px 12px;
            font-size: 14px;
        }

        .modal-footer {
            padding: 5px;
        }


        .btn {
            font-size: 16px;
            color: white
        }




        .btns {
            display: flex; /* وضع الأزرار في سطر واحد */
            gap: 10px; /* المسافة بين الأزرار */
            font-size: 16px;
        }

        .btna {
            background: #1286ba;
            color: white;
            padding: 5px 5px;
            border: none;
            cursor: pointer;
        }
       
        .table th {
        font-size: 16px;
            white-space: nowrap;
        }

    .table th, .table td {
        padding: 0.5rem;
    }

    .img-thumbnail {
        width: 40px;
        height: 40px; 
    }

    
    }



    thead th {
        background-color: #dee2e6 !important;
        color: white; 
    }


    .no-data-message {
        text-align: center;
        font-size: 18px;
        color: #888;
        margin-top: 20px;
    }


    /* Customize modal header background */
    .modal-header {
        background-color: #1286ba;
        border-bottom: 1px solid #ddd;
        font-weight: bold;
    }

  

    .modal-content {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        font-size:30px
    }

    .modal-header .close {
        font-size: 1.5rem;
        color: #aaa;
        font-size: 30px
    }

  

</style>

<div class="container-fluid">
    <table class="table table-hover   table-responsive">
        <thead >
            <tr class="custom-header">
                <th>TrackingDriver</th>

            <th class="f">Name</th>
            <th class="f">VehicleType</th>
            <th class="f">Email</th>
            <th class="f">Phone</th>
            <th>Profile Picture</th>
            <th>License Picture</th>
            <th>workPermit Picture</th>
            <th class="f">Status</th>
            <th class="f">Actions</th>

        </tr>
    </thead>
    <tbody id="driverTable">

            @if (Model == null || !Model.Drivers.Any() || !Model.Drivers.Any(d => d.IsApproved == null))
            {
                <tr>
                    <td colspan="10" class="text-center">No data to display</td>
                </tr>
            }
            else
            {
                @foreach (var driver in Model.Drivers.Where(d => d.IsApproved == null))
                {
            <tr class="@((driver.IsNewDriver) ? "" : "")">
                <td>@driver.TrackingDriver</td>

                <td>@driver.Name</td>
                <td>@driver.VehicleType</td>

                <td>@driver.Email</td>
                <td>@driver.phone</td>




                <td>
                    <a href="@Url.Content("~/" + driver.ProfilePicture)" data-toggle="modal" data-target="#imageModal">
                        <img src="@Url.Content("~/" + driver.ProfilePicture)" alt="Profile Picture" style="width:50px;height:50px" />



                    </a>
                </td>

                <td>
                    <a href="@Url.Content("~/" + driver.LicensePicture)" data-toggle="modal" data-target="#imageModal">
                            <img src="@Url.Content("~/" + driver.LicensePicture)" alt="License Picture" style="width:50px;height:50px" loading="lazy" />
                    </a>
                </td>
                <td>
                    <a href="@Url.Content("~/" + driver.workPermitPicture)" data-toggle="modal" data-target="#imageModal">
                        <img src="@Url.Content("~/" + driver.workPermitPicture)" alt="License Picture" style="width:50px;height:50px" />
                    </a>
                </td>
                <td>
                            @if (driver.IsApproved == true)
                            {
                                <span class="badge bg fs-6">Approved</span>
                            }
                            else if (driver.IsApproved == false)
                            {
                                <span class="badge bg-n fs-6">Rejected</span>
                            }
                            else
                            {
                                <span class="badge bg-info fs-6">Pending</span>
                            }

                </td>
                <td>
                    @if (driver.IsApproved == null)
                    {
                        <div class="btns">



                                    <!-- Buttons that open the modal -->
                                    <a href="#" class="btna " data-toggle="modal" data-target="#confirmModal" onclick="setAction('@Url.Action("ApproveDriver", "HRS", new { id = driver.DriverId })')">Approve</a>
                                    <a href="#" class="btna " data-toggle="modal" data-target="#confirmModal" onclick="setAction('@Url.Action("RejectDriver", "HRS", new { id = driver.DriverId })')">Reject</a>

                                </div>
                    
                    }
                    else
                    {
                        <span class="text-muted">No actions</span>
                    }
                </td>
            </tr>
        }}
    </tbody>
</table>

</div>

<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmModalLabel">Are you sure?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Are you sure you want to perform this action? This operation cannot be undone.
            </div>
            <div class="modal-footer btns">
                <button type="button" class="btna" data-dismiss="modal">Cancel</button>
                <button type="button" id="confirmAction" class="btna">Confirm</button>
            </div>
        </div>
    </div>
</div>



    <script>
        // //     $('a[data-toggle="modal"]').on('click', function (e) {
        // //     e.preventDefault();
        // //     var imageSrc = $(this).attr('href');
        // //     $('#modalImage').attr('src', imageSrc);
        // // });
              var actionUrl = '';

        // Function to set the action URL when the modal is triggered
        function setAction(url) {
            actionUrl = url;
            document.getElementById('confirmAction').onclick = function () {
                window.location.href = actionUrl;  // Execute the action when 'Confirm' is clicked
            };
        }


    
    </script>

