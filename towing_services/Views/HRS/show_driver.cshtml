@model towing_services.Models.PaginatedDriversViewModel

@* @{
    Layout = "~/Views/Shared/_HRLayout.cshtml";
} *@
@{
    Layout = "~/Views/Shared/test.cshtml";
}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">


<style>
    .pagination-container {
    justify-content: flex-end; /* لجعل الأزرار في الجهة اليمنى */
    margin-top: 20px;  /* المسافة من الأعلى */
    margin-bottom: 20px;  /* المسافة من الأسفل */
    text-align: right; /* توجيه النص لليمين */
}
/****title**/
    .manage-drivers-container {
        text-align: center;
        padding: 20px;
    }

    .title {
        font-size: 36px;
        font-weight: bold;
        color: black;
    }

    .underline {
        width: 50%; /* العرض نسبة إلى عرض العنصر الأب */
        max-width: 600px; /* الحد الأقصى لعرض الخط */
        height: 10px;
        background-color: #0c1f24; /* اللون حسب الاختيار */
        margin: 30px auto;
    }

    @@media (max-width: 768px) {
        .title {
            font-size: 19px;
            font-weight: bold;
            color: black;
        }

        .underline {
            width: 50%; /* العرض نسبة إلى عرض العنصر الأب */
            max-width: 600px; /* الحد الأقصى لعرض الخط */
            height: 2px;
            background-color: #0c1f24; /* اللون حسب الاختيار */
            margin: 20px auto;
        }

        .btn{
            font-size: 1px;
            color: white
        }
    }

    .btnd {
        color: white;
        background-color: #1e90ff;
        font-size: 20px;
        padding: 8px 16px;
        border-radius: 4px;
        text-decoration: none;
    }

        /* Add hover effect */
        .btnd:hover {
            background-color: #1e90ff;
        }

    /* Adjust pagination button size */
    .pagination .page-item .btnd {
        font-size: 20px;
        padding: 8px 16px;
    }

    /* Styling for the page label */
    .pagination .page-item.active .btnd {
        background-color: #1e90ff;
        border-color: #1e90ff;
    }


</style>



<div class="manage-drivers-container">
    <h1 class="title">Approve or Reject Driver Registrations</h1>
    <div class="underline"></div>
</div>
<div class="d-flex justify-content-between align-items-center mb-3">
    <nav class="ms-auto">
        <ul class="pagination justify-content-center">
            <li class="page-item @(Model.CurrentPage == 1 ? "disabled" : "")">
                <a class="btnd " href="javascript:void(0);" onclick="loadPage(@(Model.CurrentPage - 1))">«</a>
            </li>

            <li class="page-item active">
                <span class="btnd "> page @Model.CurrentPage</span>
            </li>

            <li class="page-item @(Model.CurrentPage == Model.TotalPages ? "disabled" : "")">
                <a class="btnd " href="javascript:void(0);" onclick="loadPage(@(Model.CurrentPage + 1))">»</a>
            </li>
        </ul>
    </nav>
</div>


<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageModalLabel">Image Preview</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <img src="" id="modalImage" class="img-fluid" alt="Image Preview" loading="lazy">
            </div>
        </div>
    </div>
</div>

<div id="driverTableContainer " class="">
    @await Html.PartialAsync("DriverTablenew", Model)
</div>


<script>
    $(document).ready(function () {
        // عند النقر على أي رابط يحتوي على خاصية data-toggle="modal"
        $('a[data-toggle="modal"]').on('click', function (e) {
            e.preventDefault(); // منع فتح الرابط بشكل عادي
            var imageSrc = $(this).attr('href'); // الحصول على رابط الصورة الأصلية
            $('#modalImage').attr('src', ''); // مسح الصورة القديمة إذا كانت موجودة
            $('#modalImage').attr('src', imageSrc); // تعيين الرابط للمودال
        });

       window.loadPage = function(page) {
                var totalPages = '@Model.TotalPages';
                if (page < 1 || page > totalPages) return;
                $.ajax({
                    url: '/HRS/show_driver?page=' + page,
                    type: 'GET',
                    success: function (data) {
                        $('#driverTableContainer').html($(data).find('#driverTableContainer').html());
                        $('.pagination').html($(data).find('.pagination').html());
                    },
                    error: function (err) {
                        console.error("Error loading page:", err);
                    }
                });
            }
        });
</script>

